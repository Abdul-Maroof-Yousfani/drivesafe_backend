// Tenant database mapping and management

model TenantDatabaseMapping {
  id                    String   @id @default(cuid())
  dealerId              String   @unique
  dealer                Dealer   @relation("DealerTenantMapping", fields: [dealerId], references: [id], onDelete: Cascade)
  databaseName          String   @unique  // Database name (e.g., dealer_abc123)
  databaseUrl           String            // Full connection string
  connectionPoolSize    Int      @default(5)  // Connection pool size for this tenant
  status                String   @default("active")  // active, migrating, error, inactive
  lastHealthCheck       DateTime?
  lastSyncAt            DateTime?
  syncStatus            String?            // success, error, pending
  syncErrorMessage      String?
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
  
  @@index([dealerId])
  @@index([databaseName])
  @@index([status])
}

